<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

    </style>
</head>
<body>

<script>
//    function want() {
//        console.log('这是want')
//    }
//    function fn(want) {
//        console.log('这里执行了一顿低吗')
//
//        //返回promise对象
//
//        return new Promise(function (resolve, reject) {
//            if(typeof want == 'function'){
//                resolve(want);
//            }
//            else{
//                reject('这玩意不是个函数')
//            }
//        })
//    }
//
//    fn(want).then(function () {
//        want();
//    });
//
//    fn('123').catch(function (err) {
//        console.log(err);
//    })
//
//
//    function fn(num) {
//        return new Promise(function (resolve, reject) {
//            if(typeof num == 'number'){
//                resolve();
//            }else{
//                reject();
//            }
//        }).then(function () {
//            console.log('这是一个数')
//        },function () {
//            console.log('不是个数');
//        })
//    }
//
//    fn('123412')
//
//    function fn(num) {
//        return new Promise(function (resolve, reject) {
//            if(typeof num == 'number'){
//                resolve(num);
//            }else{
//                reject('不是个数');
//            }
//        })
//
//    }
//
//    fn(2).then(function (num) {
//        console.log('first' + num);
//        return num + 1;
//        })
//        .then(function (num) {
//            console.log('second' + num);
//            return num + 1
//        })
//        .then(function (num) {
//            console.log('333' + num);
//            return num + 1
//        });
//
//
//    //todo 封装一个ajax get请求
//    function getJson(url) {
//        return new Promise(function (resolve, reject) {
//            var xhr = new XMLHttpRequest();
//            xhr.open('GET',url,true);
//            xhr.send();
//
//            xhr.onreadystatechange = function () {
//                if(xhr.readyState == 4){
//                    if(xhr.status == 200){
//                        try {
//                            var response = JSON.parse(xhr.responseText);
//                            resolve(response);
//                        }catch (e){
//                            reject(e)
//                        }
//                    }
//                }else{
//                    reject(console.log('这玩意不行'));
//                }
//            }
//        })
//    }
//
//var url = 'https://hq.tigerbrokers.com/fundamental/finance_calendar/getType/2017-02-26/2017-06-10';
//var url1 = 'https://hq.tigerbrokers.com/fundamental/finance_calendar/getType/2017-03-26/2017-06-10';
//getJson(url).then(function (resp) {
//        console.log(resp);
//    })
//
//    function renderAll() {
//        return Promise.all([getJson(url),getJson(url1)]);
//    }
//    renderAll().then(function (value) {
//        console.log(value);
//    })





//    function fn(msg) {
//        return new Promise(function (resolve, reject) {
//            if(msg == 1){
//                resolve(msg);
//            }else if(msg == 2){
//                resolve(msg)
//            }else {
//                reject('你这是啥');
//            }
//        })
//    }
//
//    fn(1).then(function (msg) {
//            console.log('进入resolve1' + msg);
//            return msg + 1;
//        },function (err) {
//            console.log(err);
//        })
//        .then(function (msg) {
//            console.log('进入resolve2' + msg);
//            return msg + 1;
//        },function (err) {
//            console.log(err)
//        })
//        .then(function (msg) {
//            console.log('进入resolve3' + msg);
//            return msg + 1;
//        },function (err) {
//            console.log(err)
//        })
//        .then(function (msg) {
//            console.log(msg);
//        })

//    fn(3).then(null,function (msg) {
//        console.log(msg);
//    })

//    fn(3).then(function (msg) {
//        console.log(msg)
//    },function (err) {
//        console.log(err);
//    })



var fn = function(num) {
    return new Promise(function(resolve, reject) {
        if (typeof num == 'number') {
            resolve(num);
        } else {
            reject('TypeError');
        }
    })
}

fn(2).then(function(num) {
    console.log('first: ' + num);
    return num + 1;
})
    .then(function(num) {
        console.log('second: ' + num);
        return num + 'a';
    })
    .then(function(num) {
        console.log('third: ' + num);
        return num + 1;
    });


























</script>
</body>
</html>